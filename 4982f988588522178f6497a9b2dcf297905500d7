---
date: '2025-12-15'
deciders:
- '@zircote'
id: 20251215-use-docker-container-isolation-for-task-execution
linked_commits:
- be14872
status: accepted
tags:
- infrastructure
- security
title: Use Docker Container Isolation for Task Execution
---

# Use Docker Container Isolation for Task Execution

## Status

Accepted

## Context

SWE-bench tasks require running arbitrary test suites from real-world repositories. We need isolation to protect the host system. Options considered:

1. **Docker containers** - Full isolation per task with resource limits
2. **Virtual environments only** - UV venvs per task, lighter but less isolated
3. **No isolation** - Run in current environment, fastest but risky

## Decision

Use **Docker containers** for task isolation.

## Consequences

### Positive
- Full filesystem, network, and process isolation
- Safe execution of untrusted test suites
- Reproducible environments across runs
- Resource limits (memory, CPU) prevent runaway tasks
- Easy cleanup via container removal

### Negative
- Requires Docker daemon running
- Container startup overhead (~5-10 seconds per task)
- More complex setup than venvs

### Neutral
- Base image configurable (default: python:3.11-slim)
- Network access can be toggled for specific tasks
- Labels enable cleanup of orphaned containers

## Implementation Notes

- Shallow git clone (--depth 100) for faster setup
- In-memory tar archives for script injection
- Labeled containers for batch cleanup
